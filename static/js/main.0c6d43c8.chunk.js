(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/logo.1ae09dda.svg"},37:function(e,t,n){e.exports=n.p+"static/media/calendar.17b75e4d.svg"},38:function(e,t,n){e.exports=n.p+"static/media/favorite_outline.bd6008c7.svg"},39:function(e,t,n){e.exports=n.p+"static/media/favorite_fill.e246b4e3.svg"},40:function(e,t,n){e.exports=n.p+"static/media/left.1caaef75.svg"},41:function(e,t,n){e.exports=n.p+"static/media/right.9a9e9d18.svg"},42:function(e,t,n){e.exports=n.p+"static/media/face.9f965a85.svg"},43:function(e,t,n){e.exports=n.p+"static/media/settings_white.5b0cc761.svg"},44:function(e,t,n){e.exports=n.p+"static/media/history.dd742d74.svg"},45:function(e,t,n){e.exports=n.p+"static/media/list.654fd082.svg"},47:function(e,t,n){e.exports=n(84)},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),o=n(10),l=n(9),s=n(3),u=(n(56),function(e){var t=e.children;return r.a.createElement("div",{className:"container"},t)}),m=(n(57),function(e){var t=e.icon,n=e.title,c=Object(a.useRef)(null),i=Object(a.useRef)(null),l=function(){i.current.classList.remove("header__burger_open"),c.current.classList.remove("header__nav_open")};return r.a.createElement("header",{className:"header"},r.a.createElement(u,null,r.a.createElement(o.b,{to:"/",className:"button button_large header__main",onClick:l},r.a.createElement("img",{src:t,alt:"logo"}),r.a.createElement("span",null,n)),r.a.createElement("nav",{className:"header__nav",ref:c},r.a.createElement(o.c,{exact:!0,to:"/",className:"button",activeClassName:"button_selected",onClick:l},"Search"),r.a.createElement(o.c,{to:"/profile",className:"button",activeClassName:"button_selected",onClick:l},"Profile")),r.a.createElement("span",{className:"header__burger",ref:i,onClick:function(){i.current.classList.toggle("header__burger_open"),c.current.classList.toggle("header__nav_open")}})))}),f=function(e){return{type:"SET_TITLE",title:e}},d=function(e){return{type:"SET_TYPE",searchType:e}},p=function(e){return{type:"SET_PAGE",page:e}},E=function(e){return{type:"SET_LIST",list:e}},_=function(e){return{type:"SET_PROFILE_NAME",name:e}},b=function(e){return{type:"SET_PROFILE_LIST",list:e}},h=function(e){return{type:"DELETE_PROFILE_LIST",imdbID:e}},g=function(e){return{type:"SET_PROFILE_HISTORY",history:e}},O=function(e){return{type:"ADD_PROFILE_HISTORY",history:e}},v=n(11),y=(n(59),function(e){var t=e.className,n=e.id,a=e.children,c=e.onClick;return r.a.createElement("button",{className:"button ".concat(t||""),onClick:c,id:n},a)}),N=(n(60),function(e){var t=e.value,n=e.type,a=e.onChange;return r.a.createElement("input",{className:"input",type:n,value:t,onChange:function(e){a(e.target.value)}})}),j=(n(61),function(e){var t=e.title,n=e.type,c=e.list,i=e.getList,o=Object(a.useState)(t),l=Object(v.a)(o,2),s=l[0],m=l[1],f=Object(a.useState)(n),d=Object(v.a)(f,2),p=d[0],E=d[1];return r.a.createElement("section",{className:"search"},r.a.createElement(u,null,r.a.createElement("div",{className:"search__block ".concat(c?"":"search__block_middle")},r.a.createElement(N,{value:s,type:"search",onChange:m}),r.a.createElement("select",{className:"select",defaultValue:p,onChange:function(e){return E(e.target.value)}},r.a.createElement("option",{value:"movie"},"Movie"),r.a.createElement("option",{value:"series"},"Series")),r.a.createElement(y,{onClick:function(){s===t&&p===n||i(s,p)}},"Search"))))}),L=n(36),P=n.n(L).a.create({baseURL:"https://www.omdbapi.com/"}),k=window.localStorage,I=function(e,t,n){return P.get("?apikey=".concat("dfdae3d4","&s=").concat(e,"&type=").concat(t,"&page=").concat(n)).then((function(e){return e.data}))},S=function(e){return new Promise((function(t,n){k.setItem("name",e),t(e)}))},T=function(){return new Promise((function(e,t){var n=k.getItem("name");n||(n="User"),e(n)}))},C=function(e){return new Promise((function(t,n){k.setItem("list",e),t(e)}))},D=function(){return new Promise((function(e,t){e(k.getItem("list"))}))},w=function(){return new Promise((function(e,t){k.setItem("list",""),e("")}))},R=function(e){return new Promise((function(t,n){k.setItem("history",e),t(e)}))},A=function(){return new Promise((function(e,t){e(k.getItem("history"))}))},x=function(){return new Promise((function(e,t){k.setItem("history",""),e("")}))},F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(r){e&&I(e,t,n).then((function(a){"False"!==a.Response?(r(f(e)),r(d(t)),r(p(n)),r(E(a.Search))):alert(a.Error)})).then((function(n){a&&r(O({title:e,type:t}))})).catch((function(e){return alert("thunks error:",e)}))}},H=Object(l.b)((function(e){return{title:e.options.title,type:e.options.type,page:e.options.page,list:e.data.list}}),{setTitle:f,setType:d,setPage:p,setList:E,getList:F,addProfileHistoryAC:O})(j),Y=n(37),J=n.n(Y),M=n(38),W=n.n(M),U=n(39),B=n.n(U),G=n(20),V=n.n(G),$=(n(79),function(e){var t=e.title,n=e.poster,a=e.year,c=e.imdbID,i=e.isLiked,o=e.addProfileList,l=e.deleteProfileList;return"N/A"===n&&(n=V.a),r.a.createElement("div",{className:"card",tabIndex:"0"},r.a.createElement("img",{src:n,alt:t,className:"card__poster"}),r.a.createElement("div",{className:"card__field"},r.a.createElement("h2",{className:"card__title"},t),r.a.createElement("span",{className:"card__year"},r.a.createElement("img",{src:J.a,alt:"runtime",className:"card__icon"}),a)),r.a.createElement(y,{className:"button_medium",onClick:function(e){return function(e,r){r?l(c):o({title:t,year:a,poster:n,imdbID:c})}(0,i)}},r.a.createElement("img",{src:i?B.a:W.a,alt:"icon"}),r.a.createElement("span",null,i?"Liked":"Like it!")))}),q=n(40),z=n.n(q),K=n(41),Q=n.n(K),X=(n(80),function(e){var t=e.title,n=e.type,c=e.page,i=e.list,o=e.profileList,l=e.setPage,s=e.addList,m=e.addProfileListAC,f=e.deleteProfileListAC,d=Object(a.useRef)(null),p=Object(a.useState)(!1),E=Object(v.a)(p,2),_=E[0],b=E[1],h=function(e){var t=d.current,n=t.clientWidth;"prev"===e.currentTarget.getAttribute("id")&&(n=-n),t.scrollBy({left:n,top:0,behavior:"smooth"})};return Object(a.useEffect)((function(){d.current.scrollTo({left:0,top:0,behavior:"smooth"})}),[t,n]),r.a.createElement("section",{className:"slider ".concat(i?"":"slider_hidden")},r.a.createElement(u,null,r.a.createElement("div",{className:"slider__block"},r.a.createElement("div",{className:"slider__navigation"},r.a.createElement(y,{className:"slider__button",id:"prev",onClick:h},r.a.createElement("img",{className:"header__icon",src:z.a,alt:"logo"}),r.a.createElement("span",{className:"header__title"},"Prev")),r.a.createElement(y,{className:"slider__button",id:"next",onClick:h},r.a.createElement("span",{className:"header__title"},"Next"),r.a.createElement("img",{className:"header__icon",src:Q.a,alt:"logo"}))),r.a.createElement("div",{className:"slider__carousel",ref:d,onScroll:function(){d.current.scrollWidth-(d.current.scrollLeft+d.current.clientWidth)<d.current.clientWidth&&!_&&(b(!0),l(c+1),s(t,n,c+1),setTimeout((function(){return b(!1)}),3e3))}},i&&i.map((function(e){return r.a.createElement($,{title:e.Title,poster:e.Poster,year:e.Year,imdbID:e.imdbID,isLiked:o&&o.find((function(t){return t.imdbID===e.imdbID})),addProfileList:m,deleteProfileList:f,key:"".concat(e.Title,"-").concat(e.Year)})}))))))}),Z=Object(l.b)((function(e){return{title:e.options.title,type:e.options.type,page:e.options.page,list:e.data.list,profileList:e.profile.list}}),{setPage:p,addList:function(e,t,n){return function(a){I(e,t,n).then((function(e){"False"!==e.Response?a({type:"ADD_LIST",list:e.Search}):alert(e.Error)})).catch((function(e){return alert("thunks error:",e)}))}},addProfileListAC:function(e){return{type:"ADD_PROFILE_LIST",list:e}},deleteProfileListAC:h})(X),ee=(n(81),function(e){var t=e.title,n=e.type,a=e.poster,c=e.imdbID,i=e.getList,o=e.deleteProfileList,l=e.isHistory,s=e.isFavorite;return r.a.createElement("li",{className:"list-item"},s&&r.a.createElement("img",{src:a,alt:"poster",className:"list-item__poster"}),r.a.createElement("span",{className:"list-item__title"},t,n&&" (".concat(n,")")),l&&r.a.createElement(y,{className:"button_outlined",onClick:function(e){return i(t,n,1,!1)}},"Search"),s&&r.a.createElement(y,{className:"button_outlined",onClick:function(e){return o(c)}},"Delete"))}),te=(n(82),n(42)),ne=n.n(te),ae=n(43),re=n.n(ae),ce=n(44),ie=n.n(ce),oe=n(45),le=n.n(oe),se=function(e){var t=e.name,n=e.history,c=e.list,i=e.setProfileName,o=e.clearProfileHistory,l=e.clearProfileList,s=e.getList,m=e.deleteProfileListAC,f=Object(a.useRef)(null),d=Object(a.useRef)(null),p=Object(a.useRef)(null),E=Object(a.useState)(t),_=Object(v.a)(E,2),b=_[0],h=_[1];Object(a.useEffect)((function(){h(t)}),[t]);var g=function(e){(e.target.classList.contains("settings")||e.target.closest("#settings-button"))&&f.current.classList.toggle("modal_open"),(e.target.classList.contains("history")||e.target.closest("#history-button"))&&d.current.classList.toggle("modal_open"),(e.target.classList.contains("list")||e.target.closest("#list-button"))&&p.current.classList.toggle("modal_open"),e.target.closest("#settings-button-close")&&f.current.classList.remove("modal_open"),e.target.closest("#history-button-close")&&d.current.classList.remove("modal_open"),e.target.closest("#list-button-close")&&p.current.classList.remove("modal_open")};return r.a.createElement("section",{className:"profile"},r.a.createElement(u,null,r.a.createElement("div",{className:"profile__block"},r.a.createElement("div",{className:"userinfo"},r.a.createElement("img",{alt:"avatar",src:ne.a,className:"userinfo__avatar"}),r.a.createElement("h1",{className:"userinfo__username"},t),r.a.createElement(y,{className:"button_medium",id:"settings-button",onClick:g},r.a.createElement("img",{src:re.a,alt:"icon"}),r.a.createElement("span",null,"Settings")),r.a.createElement(y,{className:"button_medium",id:"history-button",onClick:g},r.a.createElement("img",{src:ie.a,alt:"icon"}),r.a.createElement("span",null,"History")),r.a.createElement(y,{className:"button_medium",id:"list-button",onClick:g},r.a.createElement("img",{src:le.a,alt:"icon"}),r.a.createElement("span",null,"My list"))),r.a.createElement("div",{className:"modal settings",ref:f,onClick:g},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Username:"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(N,{type:"text",value:b,onChange:h}),r.a.createElement(y,{className:"button_outlined",onClick:function(e){return i(b)}},"Save")),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(y,{className:"button_outlined",onClick:function(e){return o()}},"Clear history"),r.a.createElement(y,{className:"button_outlined",onClick:function(e){return l()}},"Clear list")),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(y,{id:"settings-button-close",onClick:g},"Okay")))),r.a.createElement("div",{className:"modal history",ref:d,onClick:g},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Your history:"),r.a.createElement("ul",{className:"modal__list"},n&&n.length?n.map((function(e,t){return r.a.createElement(ee,{key:"".concat(e.title,"(").concat(t,")"),title:e.title,type:e.type,getList:s,isHistory:!0})})):"Your history is empty"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(y,{id:"history-button-close",onClick:g},"Okay")))),r.a.createElement("div",{className:"modal list",ref:p,onClick:g},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Your list:"),r.a.createElement("ul",{className:"modal__list"},c&&c.length?c.map((function(e,t){return r.a.createElement(ee,{key:"".concat(e.title,"(").concat(t,")"),title:e.title,poster:e.poster,imdbID:e.imdbID,deleteProfileList:m,isFavorite:!0})})):"Your list is empty"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(y,{id:"list-button-close",onClick:g},"Okay")))))))},ue=Object(l.b)((function(e){return{name:e.profile.name,list:e.profile.list,history:e.profile.history}}),{setProfileName:function(e){return function(t){S(e).then((function(e){return t(_(e))})).catch((function(e){return alert("thunks error:",e)}))}},clearProfileHistory:function(){return function(e){x().then((function(t){return e(g(t))})).catch((function(e){return alert("thunks error:",e)}))}},clearProfileList:function(){return function(e){w().then((function(t){return e(b(t))})).catch((function(e){return alert("thunks error:",e)}))}},getList:F,deleteProfileListAC:h})(se);var me=Object(l.b)((function(e){return{name:e.profile.name,list:e.profile.list,history:e.profile.history}}),{getProfileName:function(){return function(e){T().then((function(t){return e(_(t))})).catch((function(e){return alert("thunks error:",e)}))}},getProfileList:function(){return function(e){D().then((function(t){t&&e(b(JSON.parse(t)))})).catch((function(e){return alert("thunks error:",e)}))}},getProfileHistory:function(){return function(e){A().then((function(t){t&&e(g(JSON.parse(t)))})).catch((function(e){return alert("thunks error:",e)}))}},setProfileList:function(e){return function(t){C(JSON.stringify(e)).catch((function(e){return alert("thunks error:",e)}))}},setProfileHistory:function(e){return function(t){R(JSON.stringify(e)).catch((function(e){return alert("thunks error:",e)}))}}})((function(e){var t=e.getProfileName,n=e.getProfileList,c=e.getProfileHistory,i=e.setProfileList,o=e.setProfileHistory,l=e.list,u=e.history;return Object(a.useEffect)((function(){t(),n(),c()}),[t,n,c]),Object(a.useEffect)((function(){l&&l.length&&i(l)}),[l,i]),Object(a.useEffect)((function(){u&&u.length&&o(u)}),[u,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{icon:V.a,title:"Movie App"}),r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(H,null),r.a.createElement(Z,null)),r.a.createElement(s.a,{path:"/profile"},r.a.createElement(ue,null)))})),fe=n(15),de=n(46),pe=n(13),Ee=n(1),_e={options:{title:"",type:"movie",page:1},data:{list:null},profile:{name:"User",list:[],history:[]}},be=Object(fe.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(Ee.a)(Object(Ee.a)({},e),{},{options:Object(Ee.a)(Object(Ee.a)({},e.options),{},{title:t.title})});case"SET_TYPE":return Object(Ee.a)(Object(Ee.a)({},e),{},{options:Object(Ee.a)(Object(Ee.a)({},e.options),{},{type:t.searchType})});case"SET_PAGE":return Object(Ee.a)(Object(Ee.a)({},e),{},{options:Object(Ee.a)(Object(Ee.a)({},e.options),{},{page:t.page})});case"SET_LIST":return Object(Ee.a)(Object(Ee.a)({},e),{},{data:Object(Ee.a)(Object(Ee.a)({},e.data),{},{list:t.list})});case"ADD_LIST":return Object(Ee.a)(Object(Ee.a)({},e),{},{data:Object(Ee.a)(Object(Ee.a)({},e.data),{},{list:[].concat(Object(pe.a)(e.data.list),Object(pe.a)(t.list))})});case"SET_PROFILE_NAME":return Object(Ee.a)(Object(Ee.a)({},e),{},{profile:Object(Ee.a)(Object(Ee.a)({},e.profile),{},{name:t.name})});case"SET_PROFILE_LIST":return Object(Ee.a)(Object(Ee.a)({},e),{},{profile:Object(Ee.a)(Object(Ee.a)({},e.profile),{},{list:t.list})});case"ADD_PROFILE_LIST":return Object(Ee.a)(Object(Ee.a)({},e),{},{profile:Object(Ee.a)(Object(Ee.a)({},e.profile),{},{list:[].concat(Object(pe.a)(e.profile.list),[t.list])})});case"DELETE_PROFILE_LIST":return Object(Ee.a)(Object(Ee.a)({},e),{},{profile:Object(Ee.a)(Object(Ee.a)({},e.profile),{},{list:Object(pe.a)(e.profile.list.filter((function(e){return e.imdbID!==t.imdbID})))})});case"SET_PROFILE_HISTORY":return Object(Ee.a)(Object(Ee.a)({},e),{},{profile:Object(Ee.a)(Object(Ee.a)({},e.profile),{},{history:t.history})});case"ADD_PROFILE_HISTORY":return Object(Ee.a)(Object(Ee.a)({},e),{},{profile:Object(Ee.a)(Object(Ee.a)({},e.profile),{},{history:[].concat(Object(pe.a)(e.profile.history),[t.history])})});default:return e}}),Object(fe.a)(de.a));window.store=be;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(83);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:be},r.a.createElement(o.a,{basename:"/movie-app"},r.a.createElement(me,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.0c6d43c8.chunk.js.map
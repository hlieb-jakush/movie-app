(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],{36:function(e,t,n){e.exports=n.p+"static/media/calendar.17b75e4d.svg"},37:function(e,t,n){e.exports=n.p+"static/media/favorite_outline.bd6008c7.svg"},38:function(e,t,n){e.exports=n.p+"static/media/favorite_fill.e246b4e3.svg"},39:function(e,t,n){e.exports=n.p+"static/media/left.1caaef75.svg"},40:function(e,t,n){e.exports=n.p+"static/media/right.9a9e9d18.svg"},41:function(e,t,n){e.exports=n.p+"static/media/face.9f965a85.svg"},42:function(e,t,n){e.exports=n.p+"static/media/settings_white.5b0cc761.svg"},43:function(e,t,n){e.exports=n.p+"static/media/history.dd742d74.svg"},44:function(e,t,n){e.exports=n.p+"static/media/list.654fd082.svg"},45:function(e,t,n){e.exports=n.p+"static/media/logo.1ae09dda.svg"},47:function(e,t,n){e.exports=n(83)},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),i=n.n(c),o=n(10),l=n(9),s=n(3),u=(n(56),function(e){var t=e.children;return r.a.createElement("div",{className:"container"},t)}),m=(n(57),function(e){var t=e.icon,n=e.title,c=Object(a.useRef)(null),i=Object(a.useRef)(null),l=function(){i.current.classList.remove("header__burger_open"),c.current.classList.remove("header__nav_open")};return r.a.createElement("header",{className:"header"},r.a.createElement(u,null,r.a.createElement(o.b,{to:"/",className:"button button_large header__main",onClick:l},r.a.createElement("img",{src:t,alt:"logo"}),r.a.createElement("span",null,n)),r.a.createElement("nav",{className:"header__nav",ref:c},r.a.createElement(o.c,{exact:!0,to:"/",className:"button",activeClassName:"button_selected",onClick:l},"Search"),r.a.createElement(o.c,{to:"/profile",className:"button",activeClassName:"button_selected",onClick:l},"Profile")),r.a.createElement("span",{className:"header__burger",ref:i,onClick:function(){i.current.classList.toggle("header__burger_open"),c.current.classList.toggle("header__nav_open")}})))}),f=function(e){return{type:"SET_PAGE",page:e}},d=function(e){return{type:"SET_LIST",list:e}},p=function(e){return{type:"SET_PROFILE_NAME",name:e}},E=function(e){return{type:"SET_PROFILE_LIST",list:e}},_=function(e){return{type:"SET_PROFILE_HISTORY",history:e}},b=function(e){return{type:"ADD_PROFILE_HISTORY",history:e}},h=(n(59),function(e){var t=e.className,n=e.id,a=e.children,c=e.onClick;return r.a.createElement("button",{className:"button ".concat(t||""),onClick:c,id:n},a)}),g=(n(60),function(e){var t=e.value,n=e.type,a=e.onChange;return r.a.createElement("input",{className:"input",type:n,value:t,onChange:function(e){a(e.target.value)}})}),O=(n(61),function(e){var t=e.title,n=e.type,a=e.list,c=e.setTitle,i=e.setType,o=e.getList;return r.a.createElement("section",{className:"search"},r.a.createElement(u,null,r.a.createElement("div",{className:"search__block ".concat(a?"":"search__block_middle")},r.a.createElement(g,{value:t,type:"search",onChange:c}),r.a.createElement("select",{className:"select",defaultValue:n,onChange:function(e){return i(e.target.value)}},r.a.createElement("option",{value:"movie"},"Movie"),r.a.createElement("option",{value:"series"},"Series")),r.a.createElement(h,{onClick:function(e){return o(t,n,1)}},"Search"))))}),v=n(35),y=n.n(v).a.create({baseURL:"https://www.omdbapi.com/"}),j=window.localStorage,N=function(e,t,n){return y.get("?apikey=".concat("dfdae3d4","&s=").concat(e,"&type=").concat(t,"&page=").concat(n)).then((function(e){return e.data}))},L=function(e){return new Promise((function(t,n){j.setItem("name",e),t(e)}))},P=function(){return new Promise((function(e,t){var n=j.getItem("name");n||(n="User"),e(n)}))},k=function(e){return new Promise((function(t,n){j.setItem("list",e),t(e)}))},I=function(){return new Promise((function(e,t){e(j.getItem("list"))}))},T=function(){return new Promise((function(e,t){j.setItem("list",""),e("")}))},S=function(e){return new Promise((function(t,n){j.setItem("history",e),t(e)}))},C=function(){return new Promise((function(e,t){e(j.getItem("history"))}))},w=function(){return new Promise((function(e,t){j.setItem("history",""),e("")}))},R=Object(l.b)((function(e){return{title:e.options.title,type:e.options.type,page:e.options.page,list:e.data.list}}),{setTitle:function(e){return{type:"SET_TITLE",title:e}},setType:function(e){return{type:"SET_TYPE",searchType:e}},setPage:f,setList:d,getList:function(e,t,n){return function(a){e&&N(e,t,n).then((function(e){"False"!==e.Response?a(d(e.Search)):alert(e.Error)})).then((function(n){return a(b({title:e,type:t}))})).catch((function(e){return alert("thunks error:",e)}))}},addProfileHistoryAC:b})(O),D=n(19),x=n(36),A=n.n(x),F=n(37),H=n.n(F),Y=n(38),J=n.n(Y),M=(n(79),function(e){var t=e.title,n=e.poster,a=e.year,c=e.imdbID,i=e.isLiked,o=e.addProfileList,l=e.deleteProfileList;return r.a.createElement("div",{className:"card",tabIndex:"0"},r.a.createElement("img",{src:n,alt:t,className:"card__poster"}),r.a.createElement("div",{className:"card__field"},r.a.createElement("h2",{className:"card__title"},t),r.a.createElement("span",{className:"card__year"},r.a.createElement("img",{src:A.a,alt:"runtime",className:"card__icon"}),a)),r.a.createElement(h,{className:"button_medium",onClick:function(e){return function(e,n){n?l(c):o({title:t,year:a,imdbID:c})}(0,i)}},r.a.createElement("img",{src:i?J.a:H.a,alt:"icon"}),r.a.createElement("span",null,i?"Liked":"Like it!")))}),W=n(39),U=n.n(W),B=n(40),G=n.n(B),V=(n(80),function(e){var t=e.title,n=e.type,c=e.page,i=e.list,o=e.profileList,l=e.setPage,s=e.addList,m=e.addProfileListAC,f=e.deleteProfileListAC,d=Object(a.useRef)(null),p=Object(a.useState)(!1),E=Object(D.a)(p,2),_=E[0],b=E[1],g=function(e){var t=d.current,n=t.clientWidth;"prev"===e.currentTarget.getAttribute("id")&&(n=-n),t.scrollBy({left:n,top:0,behavior:"smooth"})};return Object(a.useEffect)((function(){d.current.scrollTo({left:0,top:0,behavior:"smooth"})}),[t,n]),r.a.createElement("section",{className:"slider ".concat(i?"":"slider_hidden")},r.a.createElement(u,null,r.a.createElement("div",{className:"slider__block"},r.a.createElement("div",{className:"slider__navigation"},r.a.createElement(h,{className:"slider__button",id:"prev",onClick:g},r.a.createElement("img",{className:"header__icon",src:U.a,alt:"logo"}),r.a.createElement("span",{className:"header__title"},"Prev")),r.a.createElement(h,{className:"slider__button",id:"next",onClick:g},r.a.createElement("span",{className:"header__title"},"Next"),r.a.createElement("img",{className:"header__icon",src:G.a,alt:"logo"}))),r.a.createElement("div",{className:"slider__carousel",ref:d,onScroll:function(){d.current.scrollWidth-(d.current.scrollLeft+d.current.clientWidth)<d.current.clientWidth&&!_&&(b(!0),l(c+1),s(t,n,c+1),setTimeout((function(){return b(!1)}),3e3))}},i&&i.map((function(e){return r.a.createElement(M,{title:e.Title,poster:e.Poster,year:e.Year,imdbID:e.imdbID,isLiked:o&&o.find((function(t){return t.imdbID===e.imdbID})),addProfileList:m,deleteProfileList:f,key:"".concat(e.Title,"-").concat(e.Year)})}))))))}),$=Object(l.b)((function(e){return{title:e.options.title,type:e.options.type,page:e.options.page,list:e.data.list,profileList:e.profile.list}}),{setPage:f,addList:function(e,t,n){return function(a){N(e,t,n).then((function(e){"False"!==e.Response?a({type:"ADD_LIST",list:e.Search}):alert(e.Error)})).catch((function(e){return alert("thunks error:",e)}))}},addProfileListAC:function(e){return{type:"ADD_PROFILE_LIST",list:e}},deleteProfileListAC:function(e){return{type:"DELETE_PROFILE_LIST",imdbID:e}}})(V),q=(n(81),n(41)),z=n.n(q),K=n(42),Q=n.n(K),X=n(43),Z=n.n(X),ee=n(44),te=n.n(ee),ne=function(e){var t=e.name,n=e.history,c=e.list,i=e.setProfileName,o=e.clearProfileHistory,l=e.clearProfileList,s=Object(a.useRef)(null),m=Object(a.useRef)(null),f=Object(a.useRef)(null),d=Object(a.useState)(t),p=Object(D.a)(d,2),E=p[0],_=p[1];Object(a.useEffect)((function(){_(t)}),[t]);var b=function(e){(e.target.classList.contains("settings")||e.target.closest("#settings-button"))&&s.current.classList.toggle("modal_open"),(e.target.classList.contains("history")||e.target.closest("#history-button"))&&m.current.classList.toggle("modal_open"),(e.target.classList.contains("list")||e.target.closest("#list-button"))&&f.current.classList.toggle("modal_open"),e.target.closest("#settings-button-close")&&s.current.classList.remove("modal_open"),e.target.closest("#history-button-close")&&m.current.classList.remove("modal_open"),e.target.closest("#list-button-close")&&f.current.classList.remove("modal_open")};return r.a.createElement("section",{className:"profile"},r.a.createElement(u,null,r.a.createElement("div",{className:"profile__block"},r.a.createElement("div",{className:"userinfo"},r.a.createElement("img",{alt:"avatar",src:z.a,className:"userinfo__avatar"}),r.a.createElement("h1",{className:"userinfo__username"},t),r.a.createElement(h,{className:"button_medium",id:"settings-button",onClick:b},r.a.createElement("img",{src:Q.a,alt:"icon"}),r.a.createElement("span",null,"Settings")),r.a.createElement(h,{className:"button_medium",id:"history-button",onClick:b},r.a.createElement("img",{src:Z.a,alt:"icon"}),r.a.createElement("span",null,"History")),r.a.createElement(h,{className:"button_medium",id:"list-button",onClick:b},r.a.createElement("img",{src:te.a,alt:"icon"}),r.a.createElement("span",null,"My list"))),r.a.createElement("div",{className:"modal settings",ref:s,onClick:b},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Username:"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(g,{type:"text",value:E,onChange:_}),r.a.createElement(h,{className:"button_outlined",onClick:function(e){return i(E)}},"Save")),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(h,{className:"button_outlined",onClick:function(e){return o()}},"Clear history"),r.a.createElement(h,{className:"button_outlined",onClick:function(e){return l()}},"Clear list")),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(h,{id:"settings-button-close",onClick:b},"Okay")))),r.a.createElement("div",{className:"modal history",ref:m,onClick:b},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Your history:"),r.a.createElement("ul",{className:"modal__list"},n&&n.length?n.map((function(e,t){return r.a.createElement("li",{key:"".concat(e.title,"(").concat(t,")")},e.title,", ",e.type)})):"Your history is empty"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(h,{id:"history-button-close",onClick:b},"Okay")))),r.a.createElement("div",{className:"modal list",ref:f,onClick:b},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Your list:"),r.a.createElement("ul",{className:"modal__list"},c&&c.length?c.map((function(e,t){return r.a.createElement("li",{key:"".concat(e.title,"(").concat(t,")")},e.title)})):"Your list is empty"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(h,{id:"list-button-close",onClick:b},"Okay")))))))},ae=Object(l.b)((function(e){return{name:e.profile.name,list:e.profile.list,history:e.profile.history}}),{setProfileName:function(e){return function(t){L(e).then((function(e){return t(p(e))})).catch((function(e){return alert("thunks error:",e)}))}},clearProfileHistory:function(){return function(e){w().then((function(t){return e(_(t))})).catch((function(e){return alert("thunks error:",e)}))}},clearProfileList:function(){return function(e){T().then((function(t){return e(E(t))})).catch((function(e){return alert("thunks error:",e)}))}}})(ne),re=n(45),ce=n.n(re);var ie=Object(l.b)((function(e){return{name:e.profile.name,list:e.profile.list,history:e.profile.history}}),{getProfileName:function(){return function(e){P().then((function(t){return e(p(t))})).catch((function(e){return alert("thunks error:",e)}))}},getProfileList:function(){return function(e){I().then((function(t){t&&e(E(JSON.parse(t)))})).catch((function(e){return alert("thunks error:",e)}))}},getProfileHistory:function(){return function(e){C().then((function(t){t&&e(_(JSON.parse(t)))})).catch((function(e){return alert("thunks error:",e)}))}},setProfileList:function(e){return function(t){k(JSON.stringify(e)).catch((function(e){return alert("thunks error:",e)}))}},setProfileHistory:function(e){return function(t){S(JSON.stringify(e)).catch((function(e){return alert("thunks error:",e)}))}}})((function(e){var t=e.getProfileName,n=e.getProfileList,c=e.getProfileHistory,i=e.setProfileList,o=e.setProfileHistory,l=e.list,u=e.history;return Object(a.useEffect)((function(){t(),n(),c()}),[t,n,c]),Object(a.useEffect)((function(){l&&l.length&&i(l)}),[l,i]),Object(a.useEffect)((function(){u&&u.length&&o(u)}),[u,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{icon:ce.a,title:"Movie App"}),r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(R,null),r.a.createElement($,null)),r.a.createElement(s.a,{path:"/profile"},r.a.createElement(ae,null)))})),oe=n(14),le=n(46),se=n(12),ue=n(1),me={options:{title:"",type:"movie",page:1},data:{list:null},profile:{name:"User",list:[],history:[]}},fe=Object(oe.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(ue.a)(Object(ue.a)({},e),{},{options:Object(ue.a)(Object(ue.a)({},e.options),{},{title:t.title})});case"SET_TYPE":return Object(ue.a)(Object(ue.a)({},e),{},{options:Object(ue.a)(Object(ue.a)({},e.options),{},{type:t.searchType})});case"SET_PAGE":return Object(ue.a)(Object(ue.a)({},e),{},{options:Object(ue.a)(Object(ue.a)({},e.options),{},{page:t.page})});case"SET_LIST":return Object(ue.a)(Object(ue.a)({},e),{},{data:Object(ue.a)(Object(ue.a)({},e.data),{},{list:t.list})});case"ADD_LIST":return Object(ue.a)(Object(ue.a)({},e),{},{data:Object(ue.a)(Object(ue.a)({},e.data),{},{list:[].concat(Object(se.a)(e.data.list),Object(se.a)(t.list))})});case"SET_PROFILE_NAME":return Object(ue.a)(Object(ue.a)({},e),{},{profile:Object(ue.a)(Object(ue.a)({},e.profile),{},{name:t.name})});case"SET_PROFILE_LIST":return Object(ue.a)(Object(ue.a)({},e),{},{profile:Object(ue.a)(Object(ue.a)({},e.profile),{},{list:t.list})});case"ADD_PROFILE_LIST":return Object(ue.a)(Object(ue.a)({},e),{},{profile:Object(ue.a)(Object(ue.a)({},e.profile),{},{list:[].concat(Object(se.a)(e.profile.list),[t.list])})});case"DELETE_PROFILE_LIST":return Object(ue.a)(Object(ue.a)({},e),{},{profile:Object(ue.a)(Object(ue.a)({},e.profile),{},{list:Object(se.a)(e.profile.list.filter((function(e){return e.imdbID!==t.imdbID})))})});case"SET_PROFILE_HISTORY":return Object(ue.a)(Object(ue.a)({},e),{},{profile:Object(ue.a)(Object(ue.a)({},e.profile),{},{history:t.history})});case"ADD_PROFILE_HISTORY":return Object(ue.a)(Object(ue.a)({},e),{},{profile:Object(ue.a)(Object(ue.a)({},e.profile),{},{history:[].concat(Object(se.a)(e.profile.history),[t.history])})});default:return e}}),Object(oe.a)(le.a));window.store=fe;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(82);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:fe},r.a.createElement(o.a,{basename:"/movie-app"},r.a.createElement(ie,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.88459aa3.chunk.js.map
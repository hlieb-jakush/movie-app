(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/logo.1ae09dda.svg"},37:function(e,t,a){e.exports=a.p+"static/media/calendar.17b75e4d.svg"},38:function(e,t,a){e.exports=a.p+"static/media/favorite_outline.bd6008c7.svg"},39:function(e,t,a){e.exports=a.p+"static/media/favorite_fill.e246b4e3.svg"},40:function(e,t,a){e.exports=a.p+"static/media/left.1caaef75.svg"},41:function(e,t,a){e.exports=a.p+"static/media/right.9a9e9d18.svg"},42:function(e,t,a){e.exports=a.p+"static/media/face.9f965a85.svg"},43:function(e,t,a){e.exports=a.p+"static/media/settings_white.5b0cc761.svg"},44:function(e,t,a){e.exports=a.p+"static/media/history.dd742d74.svg"},45:function(e,t,a){e.exports=a.p+"static/media/list.654fd082.svg"},47:function(e,t,a){e.exports=a(84)},56:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),i=a.n(c),o=a(10),l=a(9),s=a(3),u=(a(56),function(e){var t=e.children;return r.a.createElement("div",{className:"container"},t)}),m=(a(57),function(e){var t=e.icon,a=e.title,c=Object(n.useRef)(null),i=Object(n.useRef)(null),l=function(){i.current.classList.remove("header__burger_open"),c.current.classList.remove("header__nav_open")};return r.a.createElement("header",{className:"header"},r.a.createElement(u,null,r.a.createElement(o.b,{to:"/",className:"button button_large header__main",onClick:l},r.a.createElement("img",{src:t,alt:"logo"}),r.a.createElement("span",null,a)),r.a.createElement("nav",{className:"header__nav",ref:c},r.a.createElement(o.c,{exact:!0,to:"/",className:"button",activeClassName:"button_selected",onClick:l},"Search"),r.a.createElement(o.c,{to:"/profile",className:"button",activeClassName:"button_selected",onClick:l},"Profile")),r.a.createElement("span",{className:"header__burger",ref:i,onClick:function(){i.current.classList.toggle("header__burger_open"),c.current.classList.toggle("header__nav_open")}})))}),f=a(11),d=(a(59),function(e){var t=e.className,a=e.id,n=e.children,c=e.onClick;return r.a.createElement("button",{className:"button ".concat(t||""),onClick:c,id:a},n)}),E=(a(60),function(e){var t=e.value,a=e.type,n=e.onChange;return r.a.createElement("input",{className:"input",type:a,value:t,onChange:n})}),h=(a(61),function(e){var t=e.title,a=e.type,c=e.list,i=e.setResultListThunk,o=Object(n.useState)(t),l=Object(f.a)(o,2),s=l[0],m=l[1],h=Object(n.useState)(a),p=Object(f.a)(h,2),_=p[0],b=p[1];return r.a.createElement("section",{className:"search"},r.a.createElement(u,null,r.a.createElement("div",{className:"search__block ".concat(c?"":"search__block_middle")},r.a.createElement(E,{value:s,type:"search",onChange:function(e){return m(e.target.value)}}),r.a.createElement("select",{className:"select",defaultValue:_,onChange:function(e){return b(e.target.value)}},r.a.createElement("option",{value:"movie"},"Movie"),r.a.createElement("option",{value:"series"},"Series")),r.a.createElement(d,{onClick:function(){s===t&&_===a||i(s,_)}},"Search"))))}),p=a(36),_=a.n(p).a.create({baseURL:"https://www.omdbapi.com/"}),b=window.localStorage,v=function(e,t,a){return _.get("?apikey=".concat("dfdae3d4","&s=").concat(e,"&type=").concat(t,"&page=").concat(a)).then((function(e){return e.data}))},g=function(e,t){return new Promise((function(a,n){b.setItem(e,JSON.stringify(t)),a(t)}))},O=function(e){return new Promise((function(t,a){t(JSON.parse(b.getItem(e)))}))},y=function(e){return{type:"SET_SEARCH_TITLE",title:e}},T=function(e){return{type:"SET_SEARCH_TYPE",category:e}},j=function(e){return{type:"SET_SEARCH_PAGE",page:e}},k=function(e){return{type:"SET_RESULT_LIST",list:e}},N=function(e){return{type:"SET_PROFILE_NAME",name:e}},S=function(e){return{type:"SET_FAVORITE_LIST",favorite:e}},L=function(e){return{type:"DELETE_FAVORITE_ITEM",imdbID:e}},I=function(e){return{type:"SET_HISTORY_LIST",history:e}},C=function(e){return{type:"ADD_HISTORY_ITEM",history:e}},R=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(r){e&&v(e,t,a).then((function(c){"False"!==c.Response?(r(y(e)),r(T(t)),r(j(a)),r(k(c.Search)),n&&r(C({title:e,type:t}))):alert(c.Error)})).catch((function(e){return alert("thunks error:",e)}))}},D=function(e){return e.search.title},F=function(e){return e.search.type},A=function(e){return e.search.page},w=function(e){return e.result.list},H=function(e){return e.profile.name},x=function(e){return e.profile.favorite},P=function(e){return e.profile.history},M=Object(l.b)((function(e){return{title:D(e),type:F(e),page:A(e),list:w(e)}}),{setResultListThunk:R})(h),Y=a(37),U=a.n(Y),V=a(38),W=a.n(V),J=a(39),B=a.n(J),G=a(20),$=a.n(G),q=(a(79),function(e){var t=e.title,a=e.poster,n=e.year,c=e.imdbID,i=e.isLiked,o=e.addFavoriteItem,l=e.deleteFavoriteItem;return"N/A"===a&&(a=$.a),r.a.createElement("div",{className:"card",tabIndex:"0"},r.a.createElement("img",{src:a,alt:t,className:"card__poster"}),r.a.createElement("div",{className:"card__field"},r.a.createElement("h2",{className:"card__title"},t),r.a.createElement("span",{className:"card__year"},r.a.createElement("img",{src:U.a,alt:"runtime",className:"card__icon"}),n)),r.a.createElement(d,{className:"button_medium",onClick:function(e){return function(e){e?l(c):o({title:t,year:n,poster:a,imdbID:c})}(i)}},r.a.createElement("img",{src:i?B.a:W.a,alt:"icon"}),r.a.createElement("span",null,i?"Liked":"Like it!")))}),z=a(40),K=a.n(z),Q=a(41),X=a.n(Q),Z=(a(80),function(e){var t=e.title,a=e.type,c=e.page,i=e.list,o=e.favorite,l=e.addResultListThunk,s=e.setSearchPage,m=e.addFavoriteItem,E=e.deleteFavoriteItem,h=Object(n.useRef)(null),p=Object(n.useState)(!1),_=Object(f.a)(p,2),b=_[0],v=_[1],g=function(e){var t=h.current,a=t.clientWidth;"prev"===e.currentTarget.getAttribute("id")&&(a=-a),t.scrollBy({left:a,top:0,behavior:"smooth"})};return Object(n.useEffect)((function(){h.current.scrollTo({left:0,top:0,behavior:"smooth"})}),[t,a]),r.a.createElement("section",{className:"slider ".concat(i?"":"slider_hidden")},r.a.createElement(u,null,r.a.createElement("div",{className:"slider__block"},r.a.createElement("div",{className:"slider__navigation"},r.a.createElement(d,{className:"slider__button",id:"prev",onClick:g},r.a.createElement("img",{className:"header__icon",src:K.a,alt:"logo"}),r.a.createElement("span",{className:"header__title"},"Prev")),r.a.createElement(d,{className:"slider__button",id:"next",onClick:g},r.a.createElement("span",{className:"header__title"},"Next"),r.a.createElement("img",{className:"header__icon",src:X.a,alt:"logo"}))),r.a.createElement("div",{className:"slider__carousel",ref:h,onScroll:function(e){h.current.scrollWidth-(h.current.scrollLeft+h.current.clientWidth)<h.current.clientWidth&&!b&&(v(!0),s(c+1),l(t,a,c+1),setTimeout((function(){return v(!1)}),3e3))}},i&&i.map((function(e){return r.a.createElement(q,{title:e.Title,poster:e.Poster,year:e.Year,imdbID:e.imdbID,isLiked:o&&o.find((function(t){return t.imdbID===e.imdbID})),addFavoriteItem:m,deleteFavoriteItem:E,key:"".concat(e.Title,"-").concat(e.Year)})}))))))}),ee=Object(l.b)((function(e){return{title:D(e),type:F(e),page:A(e),list:w(e),favorite:x(e)}}),{addResultListThunk:function(e,t,a){return function(n){v(e,t,a).then((function(e){"False"!==e.Response?n({type:"ADD_RESULT_LIST",list:e.Search}):alert(e.Error)})).catch((function(e){return alert("thunks error:",e)}))}},setSearchPage:j,addFavoriteItem:function(e){return{type:"ADD_FAVORITE_ITEM",favorite:e}},deleteFavoriteItem:L})(Z),te=(a(81),function(e){var t=e.title,a=e.type,n=e.poster,c=e.imdbID,i=e.onSearch,o=e.onDelete,l=e.isHistory,s=e.isFavorite;return r.a.createElement("li",{className:"list-item"},s&&r.a.createElement("img",{src:n,alt:"poster",className:"list-item__poster"}),r.a.createElement("span",{className:"list-item__title"},t,a&&" (".concat(a,")")),l&&r.a.createElement(d,{className:"button_outlined",onClick:function(e){return i(t,a,1,!1)}},"Search"),s&&r.a.createElement(d,{className:"button_outlined",onClick:function(e){return o(c)}},"Delete"))}),ae=a(42),ne=a.n(ae),re=a(43),ce=a.n(re),ie=a(44),oe=a.n(ie),le=a(45),se=a.n(le),ue=(a(82),function(e){var t=e.name,a=e.history,c=e.favorite,i=e.setProfileNameThunk,o=e.clearHistoryListThunk,l=e.clearFavoriteListThunk,m=e.setResultListThunk,h=e.deleteFavoriteItem,p=Object(n.useRef)(null),_=Object(n.useRef)(null),b=Object(n.useRef)(null),v=Object(n.useState)(t),g=Object(f.a)(v,2),O=g[0],y=g[1],T=Object(s.e)();Object(n.useEffect)((function(){y(t)}),[t]);var j=function(e,t,a,n){m(e,t,a,n),T.push("/")},k=function(e){(e.target.classList.contains("settings")||e.target.closest("#settings-button"))&&p.current.classList.toggle("modal_open"),(e.target.classList.contains("history")||e.target.closest("#history-button"))&&_.current.classList.toggle("modal_open"),(e.target.classList.contains("list")||e.target.closest("#list-button"))&&b.current.classList.toggle("modal_open"),e.target.closest("#settings-button-close")&&p.current.classList.remove("modal_open"),e.target.closest("#history-button-close")&&_.current.classList.remove("modal_open"),e.target.closest("#list-button-close")&&b.current.classList.remove("modal_open")};return r.a.createElement("section",{className:"profile"},r.a.createElement(u,null,r.a.createElement("div",{className:"profile__block"},r.a.createElement("div",{className:"userinfo"},r.a.createElement("img",{alt:"avatar",src:ne.a,className:"userinfo__avatar"}),r.a.createElement("h1",{className:"userinfo__username"},t),r.a.createElement(d,{className:"button_medium",id:"settings-button",onClick:k},r.a.createElement("img",{src:ce.a,alt:"icon"}),r.a.createElement("span",null,"Settings")),r.a.createElement(d,{className:"button_medium",id:"history-button",onClick:k},r.a.createElement("img",{src:oe.a,alt:"icon"}),r.a.createElement("span",null,"History")),r.a.createElement(d,{className:"button_medium",id:"list-button",onClick:k},r.a.createElement("img",{src:se.a,alt:"icon"}),r.a.createElement("span",null,"My list"))),r.a.createElement("div",{className:"modal settings",ref:p,onClick:k},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Username:"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(E,{type:"text",value:O,onChange:function(e){return y(e.target.value)}}),r.a.createElement(d,{className:"button_outlined",onClick:function(e){return i(O)}},"Save")),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(d,{className:"button_outlined",onClick:function(e){return o()}},"Clear history"),r.a.createElement(d,{className:"button_outlined",onClick:function(e){return l()}},"Clear list")),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(d,{id:"settings-button-close",onClick:k},"Okay")))),r.a.createElement("div",{className:"modal history",ref:_,onClick:k},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Your history:"),r.a.createElement("ul",{className:"modal__list"},a&&a.length?a.map((function(e,t){return r.a.createElement(te,{key:"".concat(e.title,"(").concat(t,")"),title:e.title,type:e.type,onSearch:j,isHistory:!0})})):"Your history is empty"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(d,{id:"history-button-close",onClick:k},"Okay")))),r.a.createElement("div",{className:"modal list",ref:b,onClick:k},r.a.createElement("div",{className:"modal__content"},r.a.createElement("span",{className:"modal__info"},"Your list:"),r.a.createElement("ul",{className:"modal__list"},c&&c.length?c.map((function(e,t){return r.a.createElement(te,{key:"".concat(e.title,"(").concat(t,")"),title:e.title,poster:e.poster,imdbID:e.imdbID,onDelete:h,isFavorite:!0})})):"Your list is empty"),r.a.createElement("div",{className:"modal__panel"},r.a.createElement(d,{id:"list-button-close",onClick:k},"Okay")))))))}),me=Object(l.b)((function(e){return{name:H(e),favorite:x(e),history:P(e)}}),{setProfileNameThunk:function(e){return function(t){g("name",e).then((function(e){return t(N(e))})).catch((function(e){return alert("thunks error:",e)}))}},clearHistoryListThunk:function(){return function(e){g("history","").then((function(t){return e(I(t))})).catch((function(e){return alert("thunks error:",e)}))}},clearFavoriteListThunk:function(){return function(e){g("favorite","").then((function(t){return e(S(t))})).catch((function(e){return alert("thunks error:",e)}))}},setResultListThunk:R,deleteFavoriteItem:L})(ue);var fe=Object(l.b)((function(e){return{name:H(e),favorite:x(e),history:P(e)}}),{getProfileNameThunk:function(){return function(e){O("name").then((function(t){t||(t="User"),e(N(t))})).catch((function(e){return console.log("thunks error:",e)}))}},getFavoriteListThunk:function(){return function(e){O("favorite").then((function(t){t&&e(S(t))})).catch((function(e){return alert("thunks error:",e)}))}},setFavoriteListThunk:function(e){return function(t){g("favorite",e).catch((function(e){return alert("thunks error:",e)}))}},getHistoryListThunk:function(){return function(e){O("history").then((function(t){t&&e(I(t))})).catch((function(e){return alert("thunks error:",e)}))}},setHistoryListThunk:function(e){return function(t){g("history",e).catch((function(e){return alert("thunks error:",e)}))}}})((function(e){var t=e.favorite,a=e.history,c=e.getProfileNameThunk,i=e.getFavoriteListThunk,o=e.setFavoriteListThunk,l=e.getHistoryListThunk,u=e.setHistoryListThunk;return Object(n.useEffect)((function(){c(),i(),l()}),[c,i,l]),Object(n.useEffect)((function(){t&&o(t)}),[t,o]),Object(n.useEffect)((function(){a&&u(a)}),[a,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{icon:$.a,title:"Movie App"}),r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(M,null),r.a.createElement(ee,null)),r.a.createElement(s.a,{path:"/profile"},r.a.createElement(me,null)))})),de=a(15),Ee=a(46),he=a(13),pe=a(1),_e={search:{title:"",type:"movie",page:1},result:{list:null},profile:{name:"User",favorite:[],history:[]}},be=Object(de.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_TITLE":return Object(pe.a)(Object(pe.a)({},e),{},{search:Object(pe.a)(Object(pe.a)({},e.search),{},{title:t.title})});case"SET_SEARCH_TYPE":return Object(pe.a)(Object(pe.a)({},e),{},{search:Object(pe.a)(Object(pe.a)({},e.search),{},{type:t.category})});case"SET_SEARCH_PAGE":return Object(pe.a)(Object(pe.a)({},e),{},{search:Object(pe.a)(Object(pe.a)({},e.search),{},{page:t.page})});case"SET_RESULT_LIST":return Object(pe.a)(Object(pe.a)({},e),{},{result:Object(pe.a)(Object(pe.a)({},e.result),{},{list:t.list})});case"ADD_RESULT_LIST":return Object(pe.a)(Object(pe.a)({},e),{},{result:Object(pe.a)(Object(pe.a)({},e.result),{},{list:[].concat(Object(he.a)(e.result.list),Object(he.a)(t.list))})});case"SET_PROFILE_NAME":return Object(pe.a)(Object(pe.a)({},e),{},{profile:Object(pe.a)(Object(pe.a)({},e.profile),{},{name:t.name})});case"SET_FAVORITE_LIST":return Object(pe.a)(Object(pe.a)({},e),{},{profile:Object(pe.a)(Object(pe.a)({},e.profile),{},{favorite:t.favorite})});case"ADD_FAVORITE_ITEM":return Object(pe.a)(Object(pe.a)({},e),{},{profile:Object(pe.a)(Object(pe.a)({},e.profile),{},{favorite:[].concat(Object(he.a)(e.profile.favorite),[t.favorite])})});case"DELETE_FAVORITE_ITEM":return Object(pe.a)(Object(pe.a)({},e),{},{profile:Object(pe.a)(Object(pe.a)({},e.profile),{},{favorite:Object(he.a)(e.profile.favorite.filter((function(e){return e.imdbID!==t.imdbID})))})});case"SET_HISTORY_LIST":return Object(pe.a)(Object(pe.a)({},e),{},{profile:Object(pe.a)(Object(pe.a)({},e.profile),{},{history:t.history})});case"ADD_HISTORY_ITEM":return Object(pe.a)(Object(pe.a)({},e),{},{profile:Object(pe.a)(Object(pe.a)({},e.profile),{},{history:[].concat(Object(he.a)(e.profile.history),[t.history])})});default:return e}}),Object(de.a)(Ee.a));window.store=be;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(83);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:be},r.a.createElement(o.a,{basename:"/movie-app"},r.a.createElement(fe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.de74446b.chunk.js.map